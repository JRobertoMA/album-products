<!doctype html>
<html lang="es-mx">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
	<meta name="generator" content="Hugo 0.84.0">
	<title>Album</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"/>
	<style>
		.card-body {
			padding-bottom: 0.5rem;
		}
	</style>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/
</head>
<body>
<header>
	<div class="collapse bg-dark" id="navbarHeader">
		<div class="container">
			<div class="row">
				<div class="col-sm-4 offset-md-8 py-4 text-right text-end">
					<h4 class="text-white">Opciones avanzadas</h4>
					<ul class="list-unstyled">
						<li><a href="add-collection.html" class="text-white">Agregar colección</a></li>
						<li><a href="add-model.html" class="text-white">Agregar modelo</a></li>
                        <li><a href="add-category.html" class="text-white">Agregar categoría</a></li>
						<li><a href="add-group.html" class="text-white">Agregar grupo de fotos</a></li>
                        <li><a href="group.html" class="text-white">Administrar grupos</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="navbar navbar-dark bg-dark shadow-sm">
		<div class="container">
			<a href="index.html" class="navbar-brand d-flex align-items-center">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="me-2" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
				<strong>Album</strong>
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>
	</div>
</header>
<main>
	<div class="album py-5 bg-light">
		<div class="container">
			<div class="row">
                <div class="col-md-4 col-12">
                    <form action="javascript:void();" id="form-group">
                        <input type="hidden" name="id" id="id_group">
                        <div class="mb-3">
                            <label for="collection" class="form-label">Colección</label>
                            <select name="collection" id="collection" class="form-control">
                                <option value="">Todas</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="model" class="form-label">Modelo</label>
                            <select name="model" id="model" class="form-control">
                                <option value="">Todas</option>
                            </select>
                        </div>
                        <div id="products">
                            <h5 class="text-center">Productos <button class="btn btn-success" type="button" onclick="add_product();">+</button></h5>
                            <div id="product-1" class="mb-1">
                                <input type="hidden" name="id_product[]" id="id-product-1" value="id-1">
                                <div class="mb-3">
                                    <label for="name-product-1" class="form-label">Nombre</label>
                                    <input type="text" name="name_product[]" id="name-product-1" class="form-control">
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="code-product-1" class="form-label">Codigo</label>
                                        <input type="text" name="code_product[]" id="code-product-1" class="form-control">
                                    </div>
                                    <div class="col-6">
                                        <label for="category-product-1" class="form-label">Categoría</label>
                                        <select name="category_product[]" id="category-product-1" class="form-control">
                                            <option value="">Todas</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-8 col-12">
                    <div class="row">
                        <div class="d-grid gap-2 d-md-block">
                            <button class="btn btn-primary" type="button" onclick="add_group();" id="btn-save-group">Guardar grupo</button>
                            <button class="btn btn-success" type="button" disabled id="upload_widget_opener">Cargar fotos</button>
                          </div>
                    </div>
                    <div class="row mt-2" id="photos"></div>
                </div>
			</div>
		</div>
	</div>
</main>
<footer class="text-muted py-5">
<div class="container">
<p class="text-center mb-1">
<a href="#">Regresar arriba</a>
</p>
</div>
</footer>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="js/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>
<script src="//widget.cloudinary.com/global/all.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
<script src="js/photos.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
<script>
    models();
    collections();
    categories();
    document.getElementById("upload_widget_opener").addEventListener("click", function() {
        cloudinary.openUploadWidget({ cloud_name: 'demetria', upload_preset: 'uwdq2xl3'}, 
        function(error, result) {
            console.log(result);
            var html = "";
            for (let index = 0; index < result.length; index++) {
                html += `<div class="col-md-4 col-6" id="${result[index].asset_id}">
                    <a data-fancybox="gallery" data-src="${result[index].secure_url}" data-caption="${result[index].original_filename}.${result[index].format}">
                        <img src="${result[index].secure_url}" class="card-img-top img-thumbnail rounded img-fluid"/>
                    </a>
                    <!--<p class="card-text text-center mb-1"><a href="${result[index].secure_url}" download>Descargar</a></p>-->
                </div>`;
                add_photo(result[index].asset_id, result[index].original_filename, result[index].secure_url);
            }
            combinationHtml = document.getElementById("photos");
            totalCombination = combinationHtml.childElementCount;
            if (totalCombination == 0) {
                document.getElementById("photos").innerHTML = html;
            } else {
                ultimateCombination = combinationHtml.lastElementChild;
                ultimateID = ultimateCombination.id;
                $(html).insertAfter(`#${ultimateID}`);
            }
        });
    }, false);
    $(function() {
        $("#photos").sortable({
            update: function( event, ui ) {
                change_image_order();
            }
        });
    });
</script>
</body>
</html>