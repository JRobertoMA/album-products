<!DOCTYPE html>
<html lang="es-mx">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photos Demetria</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Default</a>
        </div>
      </nav>
      <div class="container mt-4">
          <div class="row">
              <div class="col-md-4 col-12">
                  <form action="">
                        <div class="mb-3">
                            <label for="model_name" class="form-label">Nombre de la modelo</label>
                            <input type="text" class="form-control" id="model_name" placeholder="Nombre de la modelo">
                      </div>
                      <div class="mb-3">
                        <label for="session_date" class="form-label">Fecha de la sesi√≥n</label>
                        <input type="date" class="form-control" id="session_date">
                  </div>
                  </form>
              </div>
              <div class="col-md-8 col-12">
                  <div class="row">
                      <div class="col">
                        <button class="btn btn-success" id="upload_widget_opener">Cargar fotos</button>
                      </div>
                  </div>
                  <div class="row mt-2" id="photos">

                  </div>
              </div>
          </div>
      </div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="js/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>
<script src="//widget.cloudinary.com/global/all.js" type="text/javascript"></script>  
      
      <script type="text/javascript">  
        document.getElementById("upload_widget_opener").addEventListener("click", function() {
          cloudinary.openUploadWidget({ cloud_name: 'demetria', upload_preset: 'uwdq2xl3'}, 
            function(error, result) {
                console.log(result);
                var html = "";
                for (let index = 0; index < result.length; index++) {
                    html += `<div class="col-md-4 col-6" id="${result[index].asset_id}">
                    <a data-fancybox="gallery" data-src="${result[index].secure_url}" data-caption="${result[index].original_filename}.${result[index].format}">
                        <img src="${result[index].secure_url}" class="card-img-top img-thumbnail rounded img-fluid"/>
                    </a>
                    <p class="card-text text-center mb-1"><a href="${result[index].secure_url}" download>Descargar</a></p>
                </div>`;
                }
                combinationHtml = document.getElementById("photos");
                totalCombination = combinationHtml.childElementCount;
                if (totalCombination == 0) {
                    document.getElementById("photos").innerHTML = html;
                } else {
                    ultimateCombination = combinationHtml.lastElementChild;
                    ultimateID = ultimateCombination.id;
                    $(html).insertAfter(`#${ultimateID}`);
                }
            });
        }, false);
      </script>
</body>
</html>